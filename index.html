<!DOCTYPE html>
<html lang="en" class="overflow-x-hidden">
<head>
    <meta charset="UTF-8">
    <!-- Updated viewport to disable zooming -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- APP ICONS & MANIFEST -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><rect width='24' height='24' rx='5' fill='%23f97316'/><path d='M7 21h10a2 2 0 0 0 2-2V9H5v10a2 2 0 0 0 2 2z' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' fill='none'/><path d='M5 9h14' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/><path d='M12 21V9' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/><path d='M12 3v6' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/><path d='M7 3h10' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/><path d='M16 6a4 4 0 0 1-8 0' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' fill='none'/></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><rect width='24' height='24' fill='%23f97316'/><path d='M7 21h10a2 2 0 0 0 2-2V9H5v10a2 2 0 0 0 2 2z' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' fill='none'/><path d='M5 9h14' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/><path d='M12 21V9' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/><path d='M12 3v6' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/><path d='M7 3h10' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/><path d='M16 6a4 4 0 0 1-8 0' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' fill='none'/></svg>">
    <meta name="theme-color" content="#f97316">
    <link rel="manifest" href='data:application/manifest+json,{"name":"Juice Order","short_name":"Juice","display":"standalone","start_url":".","background_color":"#f1f5f9","theme_color":"#f97316","icons":[{"src":"data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 24 24%27><rect width=%2724%27 height=%2724%27 rx=%274%27 fill=%27%23f97316%27/><path d=%27M7 21h10a2 2 0 0 0 2-2V9H5v10a2 2 0 0 0 2 2z%27 stroke=%27white%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 fill=%27none%27/><path d=%27M5 9h14%27 stroke=%27white%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/><path d=%27M12 21V9%27 stroke=%27white%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/><path d=%27M12 3v6%27 stroke=%27white%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/><path d=%27M7 3h10%27 stroke=%27white%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/><path d=%27M16 6a4 4 0 0 1-8 0%27 stroke=%27white%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 fill=%27none%27/></svg>","sizes":"192x192","type":"image/svg+xml"}]}'>

    <title>Juice Order Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Color+Emoji&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
            /* Disables double-tap to zoom on mobile */
            touch-action: manipulation; 
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden; /* Prevents horizontal scroll */
            width: 100%;
        }
        
        /* Remove arrows from number inputs */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
        
        .emoji-font {
            font-family: 'Noto Color Emoji', sans-serif;
        }
    </style>
</head>
<body class="min-h-screen text-slate-800 p-2 sm:p-4 overflow-x-hidden w-full">

    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 w-full">
        
        <!-- LEFT COLUMN - INPUTS -->
        <div class="space-y-4 sm:space-y-6 w-full max-w-full">
            
            <!-- Header Card -->
            <div class="bg-white rounded-2xl shadow-sm p-4 sm:p-6 w-full">
                <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6">
                    <div class="flex items-center gap-3">
                        <!-- Custom Juice Logo -->
                        <div class="bg-orange-500 p-2.5 rounded-xl text-white shadow-md transform -rotate-6 shrink-0">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M7 21h10a2 2 0 0 0 2-2V9H5v10a2 2 0 0 0 2 2z"/>
                                <path d="M5 9h14"/>
                                <path d="M12 21V9"/>
                                <path d="M12 3v6"/>
                                <path d="M7 3h10"/>
                                <path d="M16 6a4 4 0 0 1-8 0"/>
                            </svg>
                        </div>
                        <div>
                            <h1 class="text-xl sm:text-2xl font-bold text-gray-800 leading-tight">Juice Order</h1>
                            <span class="text-xs font-medium text-orange-500 tracking-wider uppercase">Generator</span>
                        </div>
                    </div>
                    
                    <div class="flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg border border-gray-100 self-start sm:self-auto max-w-full overflow-hidden">
                        <!-- Developer Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-500 shrink-0"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>
                        <span class="text-xs sm:text-sm font-bold text-gray-700 truncate">Md Hakim Mia</span>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="w-full">
                        <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Customer Name</label>
                        <div class="relative w-full">
                            <div class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                            </div>
                            <input type="text" id="customerName" value="Hudaithi-KJ04" oninput="updatePreview()"
                                class="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all text-sm font-medium">
                        </div>
                    </div>
                    <div class="w-full">
                        <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Delivery Date</label>
                        <div class="relative w-full">
                            <div class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                            </div>
                            <input type="date" id="deliveryDate" oninput="updatePreview()"
                                class="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all text-sm font-medium">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Small Juices Card -->
            <div class="bg-white rounded-2xl shadow-sm overflow-hidden w-full">
                <div class="bg-orange-50 px-4 sm:px-6 py-3 border-b border-orange-100 flex justify-between items-center">
                    <h2 class="font-bold text-orange-800 text-sm sm:text-base">Small Juice</h2>
                    <span class="text-xs bg-white text-orange-600 px-2 py-1 rounded-full font-bold">200ml</span>
                </div>
                <div class="p-4 sm:p-6 pt-2" id="smallJuiceContainer">
                    <!-- Items injected by JS -->
                </div>
            </div>

            <!-- Large Juices Card -->
            <div class="bg-white rounded-2xl shadow-sm overflow-hidden w-full">
                <div class="bg-green-50 px-4 sm:px-6 py-3 border-b border-green-100 flex justify-between items-center">
                    <h2 class="font-bold text-green-800 text-sm sm:text-base">Large Juices</h2>
                    <span class="text-xs bg-white text-green-600 px-2 py-1 rounded-full font-bold">300ml</span>
                </div>
                <div class="p-4 sm:p-6 pt-2" id="largeJuiceContainer">
                    <!-- Items injected by JS -->
                </div>
            </div>

            <!-- Cheese Card -->
            <div class="bg-white rounded-2xl shadow-sm overflow-hidden w-full">
                <div class="bg-yellow-50 px-4 sm:px-6 py-3 border-b border-yellow-100">
                    <h2 class="font-bold text-yellow-800 text-sm sm:text-base">Other Items</h2>
                </div>
                <div class="p-4 sm:p-6 pt-2" id="otherContainer">
                    <!-- Items injected by JS -->
                </div>
            </div>
        </div>

        <!-- RIGHT COLUMN - PREVIEW -->
        <div class="lg:sticky lg:top-4 h-fit space-y-4 w-full">
            <div class="bg-gray-800 text-white p-4 rounded-xl flex items-center justify-between shadow-lg">
                <span class="font-semibold flex items-center gap-2 text-sm sm:text-base">
                    Preview
                </span>
                <button onclick="resetForm()" class="text-gray-400 hover:text-white transition-colors flex items-center gap-1 text-xs sm:text-sm bg-gray-700 hover:bg-gray-600 px-3 py-1.5 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 4v6h-6"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg> 
                    Reset
                </button>
            </div>

            <div class="bg-white rounded-xl shadow-md border-2 border-gray-200 overflow-hidden relative group">
                <div class="absolute top-2 right-2 opacity-100 z-10 flex gap-2">
                    <a id="whatsappBtn" href="#" target="_blank" class="bg-green-500 text-white hover:bg-green-600 shadow-lg px-3 py-2 rounded-lg font-medium transition-all flex items-center gap-2 text-xs sm:text-sm transform active:scale-95 no-underline">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/></svg>
                        Share
                    </a>
                    <button onclick="copyToClipboard()" id="copyBtn" class="bg-blue-600 text-white hover:bg-blue-700 shadow-lg px-3 py-2 rounded-lg font-medium transition-all flex items-center gap-2 text-xs sm:text-sm transform active:scale-95">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                        Copy
                    </button>
                </div>
                
                <textarea id="previewArea" readonly class="w-full h-[500px] sm:h-[600px] p-4 sm:p-6 font-mono text-xs sm:text-sm leading-relaxed resize-none focus:outline-none bg-white text-gray-900"></textarea>
            </div>
            
            <p class="text-center text-gray-400 text-xs sm:text-sm px-4">
                Review the order above, then click Copy or Share via WhatsApp.
            </p>
        </div>
    </div>

    <script>
        // Data Structure
        const initialData = {
            small: [
                { id: 'small_mango', label: 'Mango', emoji: 'ü•≠', value: 0 },
                { id: 'small_apple', label: 'Apple', emoji: 'üçé', value: 0 },
                { id: 'small_orange', label: 'Orange', emoji: 'üçä', value: 0 },
                { id: 'small_mix', label: 'Mix Fruits', emoji: 'ü´ê', value: 0 },
            ],
            large: [
                { id: 'large_mango', label: 'Mango', emoji: 'ü•≠', value: 0 },
                { id: 'large_apple', label: 'Apple', emoji: 'üçé', value: 0 },
                { id: 'large_pulp', label: 'Orange w/ Pulp', emoji: 'üçä', value: 0 },
                { id: 'large_mix', label: 'Mix Fruits', emoji: 'ü´ê', value: 0 },
            ],
            other: [
                { id: 'cheese_cheddar', label: '930300-Sliced Cheddar', emoji: 'üßÄ', value: 0, isCheese: true }
            ]
        };

        // Render Item Row HTML
        function createItemRow(item) {
            return `
            <div class="flex items-center justify-between py-2.5 border-b border-gray-100 last:border-0">
                <div class="flex items-center gap-3">
                    <span class="text-2xl emoji-font leading-none">${item.emoji}</span>
                    <span class="text-gray-700 font-medium text-sm sm:text-base">${item.label}</span>
                </div>
                <div class="flex items-center bg-gray-50 rounded-lg p-1 border border-gray-200">
                    <button onclick="adjustValue('${item.id}', -1)" type="button" class="w-8 h-8 flex items-center justify-center hover:bg-white rounded-md transition-colors text-red-500 shadow-sm active:bg-gray-100 touch-manipulation">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/></svg>
                    </button>
                    
                    <input 
                        type="number" 
                        id="${item.id}" 
                        value="${item.value}" 
                        oninput="updatePreview()" 
                        onfocus="this.select()"
                        inputmode="numeric" 
                        pattern="[0-9]*"
                        class="w-12 text-center font-bold text-gray-800 bg-transparent outline-none appearance-none text-base"
                    >

                    <button onclick="adjustValue('${item.id}', 1)" type="button" class="w-8 h-8 flex items-center justify-center hover:bg-white rounded-md transition-colors text-green-600 shadow-sm active:bg-gray-100 touch-manipulation">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                    </button>
                </div>
            </div>
            `;
        }

        // Initialize Form
        function init() {
            // Set default date to tomorrow
            document.getElementById('deliveryDate').value = getNextDayDate();

            document.getElementById('smallJuiceContainer').innerHTML = initialData.small.map(createItemRow).join('');
            document.getElementById('largeJuiceContainer').innerHTML = initialData.large.map(createItemRow).join('');
            document.getElementById('otherContainer').innerHTML = initialData.other.map(createItemRow).join('');
            updatePreview();
        }

        function getNextDayDate() {
            const date = new Date();
            date.setDate(date.getDate() + 1); // Add 1 day
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        // Adjust Value (+/- buttons)
        window.adjustValue = function(id, change) {
            const input = document.getElementById(id);
            let val = parseInt(input.value) || 0;
            val = Math.max(0, val + change);
            input.value = val;
            updatePreview();
        }

        // Get Value helper
        function getVal(id) {
            const el = document.getElementById(id);
            return parseInt(el.value) || 0;
        }

        // Format Date
        function formatDate(dateStr) {
            if (!dateStr) return '';
            // Parse YYYY-MM-DD manually to create a local date and avoid timezone shifts
            const [year, month, day] = dateStr.split('-');
            const date = new Date(year, month - 1, day);
            
            // Get full day name (e.g., Saturday)
            const dayName = date.toLocaleDateString('en-US', { weekday: 'long' });
            
            return `${day}-${month}-${year} (${dayName})`;
        }

        // Pad number with 0
        function formatQty(num) {
            return num.toString().padStart(2, '0');
        }

        // Main Logic: Generate Text
        window.updatePreview = function() {
            const name = document.getElementById('customerName').value;
            const date = document.getElementById('deliveryDate').value;
            
            const text = `*Juice Order  For ${name}*

Delivered on *${formatDate(date)}*


*Small Juice*
ü•≠ Mango = ${formatQty(getVal('small_mango'))}Crt 
üçéApple = ${formatQty(getVal('small_apple'))}Crt 
üçä Orange = ${formatQty(getVal('small_orange'))}Crt 
ü´êMix Fruits = ${formatQty(getVal('small_mix'))}Crt 

*Large Juices*
ü•≠ Mango = ${formatQty(getVal('large_mango'))}Crt 
üçéApple = ${formatQty(getVal('large_apple'))}Crt 
üçäOrange with Pulp = ${formatQty(getVal('large_pulp'))}Crt 
ü´ê Mix Fruits = ${formatQty(getVal('large_mix'))}Crt 


üßÄ *930300-Sliced Cheddar Cheese = ${getVal('cheese_cheddar')}crt*

Thank you
${name}`;

            document.getElementById('previewArea').value = text;
            
            // Update WhatsApp Link
            const encodedText = encodeURIComponent(text);
            const waBtn = document.getElementById('whatsappBtn');
            if(waBtn) {
                // Changed from wa.me to api.whatsapp.com to prevent encoding issues with emojis
                waBtn.href = `https://api.whatsapp.com/send?text=${encodedText}`;
            }
        }

        // Copy Function
        window.copyToClipboard = function() {
            const textArea = document.getElementById('previewArea');
            textArea.select();
            document.execCommand('copy');
            
            const btn = document.getElementById('copyBtn');
            const originalContent = btn.innerHTML;
            
            btn.innerHTML = 'Copied!';
            btn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
            btn.classList.add('bg-green-500', 'hover:bg-green-600');
            
            setTimeout(() => {
                btn.innerHTML = originalContent;
                btn.classList.add('bg-blue-600', 'hover:bg-blue-700');
                btn.classList.remove('bg-green-500', 'hover:bg-green-600');
            }, 2000);
        }

        // Reset Function
        window.resetForm = function() {
            document.getElementById('customerName').value = 'Hudaithi-KJ04';
            document.getElementById('deliveryDate').value = getNextDayDate();
            
            // Reset all inputs to initial values
            [...initialData.small, ...initialData.large, ...initialData.other].forEach(item => {
                document.getElementById(item.id).value = item.value;
            });
            
            updatePreview();
        }

        // Start
        init();

    </script>
</body>
</html>
